#backend_error
  = f.input :name, 
    placeholder: 'Enter name', 
    input_html: { autofocus: true }

= f.input :description, 
    placeholder: 'Enter Description'

= f.input :expression, 
    placeholder: 'Enter Expression', 
    icon_hint: "If the expression is true, and the alarm actions are enabled and configured a notification will be sent. Refer to the #{link_to 'documentation', 'https://github.com/sapcc/monasca-api/blob/master/docs/monasca-api-spec.md#alarm-definition-expressions', target: '_blank'} for how to write an expression."

- severity = @alarm_definition.severity || 'LOW'
= f.input :severity, 
    collection: @alarm_definition.supported_severities, 
    selected: severity, 
    icon_hint: 'Defines the severity level for the alarm'

= f.input :match_by, 
    icon_hint: 'Comma-separated list of dimensions, A separate alarm will be created for every single dimension value.'

.row
  .col-md-8.col-md-offset-3
    = f.input :actions_enabled, as: :boolean, label: 'Alarm notifications' 
    #alarm_actions
      = f.input :ok_actions, 
          label: 'OK',collection: @notification_methods.map{|s| [s.name, s.id]}, 
          input_html: { multiple: true, size: 3 }, 
          include_hidden: false, 
          icon_hint: 'Notification will be sent if alarm turns to status OK'
      = f.input :alarm_actions, 
          label: 'Alarm',
          collection: @notification_methods.map{|s| [s.name, s.id]}, 
          input_html: { multiple: true, size: 3 }, 
          include_hidden: false, 
          icon_hint: 'Notification will be sent if alarm turns to status Alarm'
      = f.input :undetermined_actions, 
          label: 'Undetermined',
          collection: @notification_methods.map{|s| [s.name, s.id]}, 
          input_html: { multiple: true, size: 3 }, 
          include_hidden: false, 
          icon_hint: 'Notification will be sent if alarm turns to status Undetermined'

= content_for :javascripts do
  :javascript
    $(function() {
      $('#alarm_actions').toggle($('#alarm_definition_actions_enabled').is(':checked'))
 
      $('#alarm_definition_actions_enabled').change(function(){
         $('#alarm_actions').toggle('fast');
      });
    });

