= content_for :title do
  Edit Alarm Definition

= simple_modal_form_for @alarm_definition, submit_action: 'Update', url: plugin('monitoring').alarm_definition_path(@alarm_definition.id), method: :put, cancel_url: plugin('monitoring').alarm_definitions_path, html: { class: 'form-horizontal' }, wrapper: :horizontal_form, autofocus: 'alarm_definition_name' do |f|
  #backend_error
  = f.input :name, placeholder: 'Enter name', :input_html => {:"data-focus" => 'autofocus'}
  = f.input :description, placeholder: 'Enter Description'
  = f.input :expression, placeholder: 'Enter Expression'
  = f.input :severity, collection: ['Low','Medium','High','Critical'], selected:'Low'
  = f.input :match_by

  %hr
  .row
    .col-md-3
    .col-md-8
      = f.input :actions_enabled, as: :boolean, label: 'Enable/Disable actions'
      %div{id: 'alarm_actions'}
        = f.input :ok_actions, collection: @notification_methods.map{|s| [s.name, s.id]}, input_html: { multiple: true, size: 3 }, :include_hidden => false
        = f.input :alarm_actions, collection: @notification_methods.map{|s| [s.name, s.id]}, input_html: { multiple: true, size: 3 }, :include_hidden => false
        = f.input :undetermined_actions, collection: @notification_methods.map{|s| [s.name, s.id]}, input_html: { multiple: true, size: 3 }, :include_hidden => false

= content_for :javascripts do
  :javascript
    $(function() {
      if ( $('#alarm_definition_actions_enabled').is(':checked') ) {
        $('#alarm_actions').css('display','inline');
      }
      else {
        $('#alarm_actions').css('display','none')
      }
  
      $('#alarm_definition_actions_enabled').change(function(){
         $('#alarm_actions').toggle('fast');
      });
    });

