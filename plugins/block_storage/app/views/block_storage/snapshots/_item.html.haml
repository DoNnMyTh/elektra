- data = {}
- if snapshot
  %tr
    - if current_user.is_allowed?("block_storage:snapshot_get", {})
      %td
        = link_to snapshot.name, plugin('block_storage').snapshot_path(id: snapshot.id), data: {modal: true}
    - else
      %td= snapshot.name
    %td= snapshot.description
    %td= snapshot.size
    %td= snapshot.status

    %td.snug
      - if current_user.is_allowed?("block_storage:snapshot_delete", {}) or current_user.is_allowed?("block_storage:snapshot_update", {})
        .btn-group
          %button.btn.btn-default.btn-sm.dropdown-toggle{ type: "button", data: { toggle: "dropdown"}, aria: { expanded: true} }
            %span.fa.fa-cog
          %ul.dropdown-menu.dropdown-menu-right{ role:"menu"}
            - if current_user.is_allowed?("block_storage:snapshot_update", {})
              %li= link_to 'Change', plugin('block_storage').edit_snapshot_path(snapshot.id), data: {modal: true}
            - if current_user.is_allowed?("block_storage:snapshot_update", {})
              %li.divider
              %li= link_to 'Create Volume', plugin('block_storage').create_volume_snapshot_path(snapshot.id), data: {modal: true}
            - if current_user.is_allowed?("block_storage:snapshot_delete", {})
              %li.divider
              %li= link_to 'Delete', plugin('block_storage').snapshot_path(id: snapshot.id), method: :delete, data: { confirm: 'Are you sure you want to delete this snapshot?' }
