= content_for :title do
  New Automation

.modal-body

  = form_tag plugin('automation').automations_path(), :class => 'form-horizontal', :remote => true, method: :post do

    .form-group
      = label_tag 'name', 'Name', class: 'col-sm-2 control-label'
      .col-sm-5
        = text_field_tag 'name', @automation.attributes[:name], :maxlength => "256", :placeholder => "Enter name", class: 'form-control', autofocus: 'autofocus'

    .form-group
      = label_tag 'repository', 'Repository', class: 'col-sm-2 control-label'
      .col-sm-5
        = text_field_tag 'repository', '', :maxlength => "256", :placeholder => "Enter repository", class: 'form-control'

    .form-group
      = label_tag 'repository_version', 'Repository version', class: 'col-sm-2 control-label'
      .col-sm-5
        = text_field_tag 'repository_version', '', :maxlength => "256", :placeholder => "Enter repository revision", class: 'form-control'

    .form-group
      = label_tag 'timeout', 'Timeout', class: 'col-sm-2 control-label'
      .col-sm-5
        = text_field_tag 'timeout', '', :maxlength => "256", :placeholder => "Enter timeout", class: 'form-control'

    .form-group
      .col-xs-12.col-sm-2.control-label
        = label_tag 'tags', 'Tags'
      .col-xs-11.col-sm-9
        = text_area_tag 'tags', '', :maxlength => "256", class: 'form-control', data: {toggle:'tagEditor'}, :placeholder => "Enter tags"
        %span.help-block
          %i.fa.fa-info-circle
          Tags are key-value pairs. See hint for more information.
      .col-xs-1.col-sm-1.help-hint
        = render 'key_value_help_hint'

    .form-group
      = label_tag 'type', 'Type', class: 'col-sm-2 control-label'
      .col-sm-5
        %select.form-control{name: 'type', id: 'type', data: {toggle: 'automationSwitch'}}
          - @automation_types.each do |key, value|
            %option{value: key, selected: (key == 'chef' ? 'true' : 'false')}
              = value

    %hr

    = render 'chef'

    = render 'script'

    #popover_container

    .form-group.clearfix
      .col-sm-12
        = button_tag "Save", { class: 'btn btn-primary pull-right', data: { disable_with: "Please wait..." } }