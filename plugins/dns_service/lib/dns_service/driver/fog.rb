module DnsService
  module Driver
    # Compute calls
    class Fog < Interface
      include Core::ServiceLayer::FogDriver::ClientHelper
      
      def initialize(params)
        super(params)
        @fog = ::Fog::DNS::OpenStack::V2.new(auth_params)
      end
      
      def list_zones(filter={})
        handle_response{@fog.list_zones(filter).body['zones']}
      end
      
      def get_zone(id)
        # FAKE
        handle_response {
          JSON.parse '{"status": "ACTIVE", "masters": [], "name": "localhost.", "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb"}, "transferred_at": null, "created_at": "2016-07-05T12:46:34.000000", "pool_id": "794ccc2c-d751-44fe-b57f-8894c9f5c842", "updated_at": "2016-08-01T07:17:41.000000", "version": 373, "id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "ttl": 86400, "action": "NONE", "attributes": {}, "serial": 1607050045, "project_id": "74a7556933954ff8ae32f1c1bcbb2d09", "type": "PRIMARY", "email": "david\\@hoeller.sap.com", "description": null}'
        }
      end
      
      def list_recordsets(zone_id)
        # FAKE
        handle_response{
          JSON.parse '[{"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/02ca0ff5-f5ec-4f29-9523-631c4ad4991a"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": null, "records": ["147.204.8.43"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "02ca0ff5-f5ec-4f29-9523-631c4ad4991a", "name": "volume-1.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/0b7480ba-de8f-415c-8167-0499d96d7e90"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": "2016-08-01T07:17:06.000000", "records": ["ns2.localhost. david\\.hoeller.sap.com. 1607050045 3515 3600 60400 3600"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 45, "ttl": null, "action": "NONE", "type": "SOA", "id": "0b7480ba-de8f-415c-8167-0499d96d7e90", "name": "localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/18209999-ec81-43a4-a924-573caed73697"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": null, "records": ["147.204.8.42"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "18209999-ec81-43a4-a924-573caed73697", "name": "network-1.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/18986d5c-254f-41f4-a376-ddb9bcb18fa4"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": null, "records": ["ingress.localhost."], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "CNAME", "id": "18986d5c-254f-41f4-a376-ddb9bcb18fa4", "name": "logs.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/1e8185d1-3b5e-4fba-be4f-0f0e654f2f5d"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": null, "records": ["localhost."], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "CNAME", "id": "1e8185d1-3b5e-4fba-be4f-0f0e654f2f5d", "name": "localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/393e58f8-cdd0-46c5-826b-e153f897bbf8"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": null, "records": ["ingress.localhost."], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "CNAME", "id": "393e58f8-cdd0-46c5-826b-e153f897bbf8", "name": "keymanager-3.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/50cdc882-3373-43d1-b433-151073e0edc0"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": null, "records": ["147.204.8.44"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "50cdc882-3373-43d1-b433-151073e0edc0", "name": "horizon-1.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/786758ad-2cef-48d6-bf42-0ca4275ae9b7"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": null, "records": ["ns1.localhost.", "ns3.localhost.", "ns2.localhost."], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 2, "ttl": null, "action": "NONE", "type": "NS", "id": "786758ad-2cef-48d6-bf42-0ca4275ae9b7", "name": "localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/88c4a53b-87d0-407e-80a4-a6db033c85ea"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": null, "records": ["ingress.localhost."], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "CNAME", "id": "88c4a53b-87d0-407e-80a4-a6db033c85ea", "name": "grafana.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/897848d8-e65f-400f-bb4b-af3f6f567306"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": null, "records": ["147.204.8.59"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "897848d8-e65f-400f-bb4b-af3f6f567306", "name": "orchestration-4.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/9acf10c0-5d69-4ec9-b39c-a6b982d654a6"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": null, "records": ["10.46.2.254"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "9acf10c0-5d69-4ec9-b39c-a6b982d654a6", "name": "ns.kubernetes.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/ad954ef1-e7ec-4964-907a-ffa9b9031c4c"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": null, "records": ["10.46.2.253"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "ad954ef1-e7ec-4964-907a-ffa9b9031c4c", "name": "lyra.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/097cbfb8-5740-46f7-9f60-e67476c86274"}, "created_at": "2016-07-05T12:46:35.000000", "updated_at": null, "records": ["147.204.8.48"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "097cbfb8-5740-46f7-9f60-e67476c86274", "name": "network-2.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/0e048295-a86a-4385-b905-332fbe09a52d"}, "created_at": "2016-07-05T12:46:35.000000", "updated_at": null, "records": ["ingress.localhost."], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "CNAME", "id": "0e048295-a86a-4385-b905-332fbe09a52d", "name": "monitoring.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/1859f37d-99c3-4277-a2d2-290b00568a47"}, "created_at": "2016-07-05T12:46:35.000000", "updated_at": null, "records": ["147.204.8.59"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "1859f37d-99c3-4277-a2d2-290b00568a47", "name": "localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/1dee2515-1c9a-4376-8e3e-b494745fb794"}, "created_at": "2016-07-05T12:46:35.000000", "updated_at": null, "records": ["147.204.8.50"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "1dee2515-1c9a-4376-8e3e-b494745fb794", "name": "horizon-2.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/1dfe3046-54fd-435c-81be-f77999de5816"}, "created_at": "2016-07-05T12:46:35.000000", "updated_at": null, "records": ["ingress.localhost."], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "CNAME", "id": "1dfe3046-54fd-435c-81be-f77999de5816", "name": "volume-3.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/2a1441bf-e17d-421d-bbc3-f847d4103127"}, "created_at": "2016-07-05T12:46:35.000000", "updated_at": null, "records": ["147.204.8.59"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "2a1441bf-e17d-421d-bbc3-f847d4103127", "name": "network-4.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/2bed3270-281e-4f22-88f8-059f4419944f"}, "created_at": "2016-07-05T12:46:35.000000", "updated_at": null, "records": ["147.204.8.59"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "2bed3270-281e-4f22-88f8-059f4419944f", "name": "volume-4.localhost."}, {"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/4464ae74-f197-4a44-b244-eb8ab8f5a1b5"}, "created_at": "2016-07-05T12:46:35.000000", "updated_at": null, "records": ["147.204.8.45"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "4464ae74-f197-4a44-b244-eb8ab8f5a1b5", "name": "identity-2.localhost."}]'
        }
      end
      
      def get_recordset(recordset_id)
        # FAKE
        handle_response{
          JSON.parse '{"status": "ACTIVE", "description": null, "links": {"self": "https://dns-3.localhost:443/v2/zones/176ac333-c9d1-47f9-9049-bd1737e13bdb/recordsets/02ca0ff5-f5ec-4f29-9523-631c4ad4991a"}, "created_at": "2016-07-05T12:46:34.000000", "updated_at": null, "records": ["147.204.8.43"], "zone_id": "176ac333-c9d1-47f9-9049-bd1737e13bdb", "version": 1, "ttl": 1800, "action": "NONE", "type": "A", "id": "02ca0ff5-f5ec-4f29-9523-631c4ad4991a", "name": "volume-1.localhost."}'
        }
      end
    end
  end
end