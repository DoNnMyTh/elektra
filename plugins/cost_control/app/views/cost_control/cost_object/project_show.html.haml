=content_for :main_toolbar do
  Cost Control


.row
  .col-md-7
    %h4
      Accumulated expenses
    - @kb11n_billing_objects.each do |kb11n_billing_object|
      = render partial: 'kb11n_show', locals: { kb11n_billing_object: kb11n_billing_object }

  .col-md-offset-8
    .infobox
    %h4
      - if current_user.is_allowed?('cost_control:cost_object_edit')
        = link_to 'Edit', plugin('cost_control').edit_cost_object_path, class: 'btn btn-default btn-xs pull-right', data: { modal: true }
      Cost object
    %table.table
      %tr
        %th.snug-nowrap Type:
        %td= @masterdata.readable_cost_object_type.presence || content_tag('div', 'Not set', class: 'text-danger')
      %tr
        %th.snug-nowrap ID:
        %td= @masterdata.cost_object_id.presence || content_tag('div', 'Not set', class: 'text-danger')

  - if @kb11n_billing_objects.blank?
    .col-md-7.alert.alert-error
      No expenses have been arisen or maintained for this project yet.

  - if @masterdata.cost_object_type.blank? or @masterdata.cost_object_id.blank?
    .col-md-offset-8.alert.alert-error
      No cost object has been maintained for this project yet.
      - if current_user.is_allowed?('cost_control:cost_object_edit')
        Please do so now.
      - else
        Please ask your project admin to take care of this.
