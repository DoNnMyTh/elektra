= render "intro"

- if @scoped_project_id
  .toolbar
    .pull-left
      .has-feedback
        = text_field_tag 'search_instances_input', '', class: "form-control", placeholder: 'project name'
        %i.glyphicon.glyphicon-search.form-control-feedback

    - if current_user.is_allowed?("compute:instance_create", {target: { project: @active_project, scoped_domain_name: @scoped_domain_name}})
      = link_to 'Create new', plugin('compute').new_instance_path, data: {modal: true}, class: 'btn btn-primary btn-lg'


  %table.table.instances.searchable{data:{search_input: '#search_instances_input'}}
    %thead
      %tr
        %th Name
        - if @all_projects
          %th Owning Project
        %th
          AZ
          %i.fa.fa-fw.fa-info-circle{data: { toggle: "tooltip", placement: "top", title: "Availability Zone"}}
        %th IPs
        %th OS
        %th Size
        %th Power state
        %th Status
        %th Created at
        %th.snug
    %tbody
      - if @instances.empty?
        %tr{data: {empty: true}}
          %td{colspan: 8} No instances available
      - else
        = render partial: 'list', locals: {instances: @instances}

  - if @pagination_has_next
    .ajax-paginate.pull-right{ data: { list_selector: 'table.instances tbody'} }

  =# render_paginatable(@instances)
- else
  = render "application/projects_list"
