// ---------------------------------------------------------------------------------
// Variables based on bootstrap variables
// (can't be in the variables.scss because it is included before bootstrap to be
// able to overwrite bootstrap variables in it)
// ---------------------------------------------------------------------------------

$font-size-medium: ceil(($font-size-base * 1.125));
$context-breadcrumb-font-size: $font-size-medium;

// ---------------------------------------------------------------------------------
// General
// ---------------------------------------------------------------------------------

html {
  /* Needed for sticky footer */
  position: relative;
  min-height: 100%;
}

body {
  padding-top: $navbar-height + $context-breadcrumb-height;
  margin-bottom: $footer-height + $footer-margin-top;

  &.landing, &.onboarding {
    padding-top: $navbar-height;
  }
}

h1, h2, h3, h4, h5, h6 {
  small, .small {
    font-family: $font-family-sap-light;
  }
}

h5, h6 {
  font-weight: bold;
}

.content {

  .nav li {
    background-image: none;
    padding-left: 0;
  }
}


ul.content-list {
  padding-left: 0;
  list-style-type: none;

  li {
    background: inline-svg('rounded-square-outline.svg') 0 4px no-repeat;
    padding-left: 19px;
  }
}

.text-copy, .well {
  ul {
    @extend .content-list;
  }
}



.navbar a, a.btn {
  text-decoration: none;
}

abbr[title],
abbr[data-original-title] {
  color: $medium-blue;
}

section {
  padding: $line-height-computed*2 0;
}

.content {
  margin: ($line-height-computed) 0 0 0;
}

.lead {
  font-family: $font-family-sap-light, "Helvetica Neue", Helvetica, Arial, sans-serif;
}

.avatar {
  margin-right: 6px;
}

.debug-info {
  display: none;
}

.visible {
  display: block;
}

.spinner {
  @include spinner(background rgba(0, 0, 0, 0.2));
  margin: 0 5px;
}

.info-text {
  color: #888;
}

.scrollable-text {
  @include border-radius;
  background: $input-bg-disabled;
  border: 1px solid #ccc;
  padding: 15px;
  height: 500px;
  overflow-y: scroll;
}

.text-nobreak {
  white-space: nowrap;
}

.pagination {
  float: right;
  ul {
  }
  li {
    background: none;
    padding-left: 0;
  }
}

// ---------------------------------------------------------------------------------
// Scaffolding
// ---------------------------------------------------------------------------------

.container-xs {
  width: $login-max-width;
  margin: 0 auto;
}

// ---------------------------------------------------------------------------------
// Icons
// ---------------------------------------------------------------------------------

.glyphicon-cloud {
  top: 3px;
}

.moo-cloud {
  background: inline-svg('monsoon_logo_flat.svg') 0 0px no-repeat;
  display: inline-block;
  width: 32px;
  height: 32px;
}

.moo-cloud-white {
  background: inline-svg('monsoon_logo_flat_white.svg') 0 0px no-repeat;
  display: inline-block;
  width: 32px;
  height: 32px;
}

.jumbotron .moo-cloud-white {
  @include opacity(0.2);
  width: 256px;
  height: 256px;
  background-size: 256px;
  position: absolute;
  top: -20px;
  right: 60px;
}

.fancy-nav-icon {
  @include background-size($font-size-h3);
  width: $font-size-h3;
  height: $font-size-h3;
  font-size: $font-size-h3;
  font-weight: normal;
}

.fa-question-circle {
  color: $help-info-blue;
}

// ---------------------------------------------------------------------------------
// Buttons
// ---------------------------------------------------------------------------------

.btn-outline {
  @include button-variant-outline($btn-outline-color, $btn-outline-bg, $btn-outline-border);
}

.btn-outline-negative {
  @extend .btn-outline;

  @include button-variant-outline-negative;
}

.btn-md {
  // line-height: ensure even-numbered height of button next to large input
  @include button-size($padding-medium-vertical, $padding-medium-horizontal, $font-size-large, $line-height-large, $border-radius-base);
}

// ---------------------------------------------------------------------------------
// Toolbar
// ---------------------------------------------------------------------------------

.toolbar {
  @include pie-clearfix;
  position: relative;
  color: #666;
  background-color: #f9f9f9;
  border-top: 2px solid #ddd;
  border-bottom: 1px solid #eee;
  padding: $toolbar-vertical-padding 8px;
  margin-top: $line-height-computed * 2.5;

  &.toolbar-bottom {
    margin-top: 0;
    margin-bottom: $line-height-computed * 2.5;
  }

  .main-buttons {
    position: absolute;
    right: 8px;
    top: 3px;
  }

  .btn {
    @extend .btn-sm;
  }

  .btn-primary {
    float: right;
    margin-left: 5px;
  }
}

// ---------------------------------------------------------------------------------
// Navigation
// ---------------------------------------------------------------------------------

.nav-highlight {
  background: rgba(255, 255, 255, 0.1);
}

.navbar-brand {
  border-right: 1px solid rgba(255, 255, 255, 0.1);
  position: relative;
  padding-left: 80px;
  color: #555;
}

#navbar-login-btn {
  @extend .btn;
  @extend .btn-info;
  padding-top: 3px;
  padding-bottom: 2px;
  top: 10px;
  margin-right: 15px;
  margin-left: 15px;
  color: #fff;
}

.navbar-identity {
  .avatar {
    margin-top: -5px;
  }
}

.navbar-inverse {

  .dropdown-menu {
    background-color: $inverse-dropdown-bg;

    .divider {
      @include nav-divider($inverse-dropdown-divider-bg);
    }

    > li > a {
      color: $inverse-dropdown-link-color;

      &:hover,
      &:focus {
        color: $dropdown-link-hover-color;
      }
    }

    > .active > a {
      &,
      &:hover,
      &:focus {
        color: $dropdown-link-active-color;
      }
    }

  }

}

.navbar-login {
  max-width: $login-max-width;
  margin: 0 auto;
}

// @media (min-width: $grid-float-breakpoint) {
//   .navbar-right {
//     margin-right: 0;
//   }
// }


.fancy-nav {
  @include column-count(2);
  padding-left: 0;
  margin-top: $line-height-computed;


  a {
    padding-left: 0;
  }

  > li {
    @include column-break(inside, avoid);
    padding-left: $grid-gutter-width * 1.4;
  }

  ul {
    list-style-type: none;
    padding: 0 0 $line-height-computed 0;
  }

  .fancy-nav-header {
    @include column-break(after, avoid);
    position: relative;
    display: block;
    padding-top: 0;
    padding-bottom: $line-height-computed / 4;

    > span {
      // font-size: $font-size-medium;
      font-weight: bold;

      &.fancy-nav-icon {
        font-size: $font-size-h3;
        font-weight: normal;
      }
    }

    .fancy-nav-icon {
      position: absolute;
      left: 0;
      color: $bright-blue;
    }
  }
}

// ---------------------------------------------------------------------------------
// Header
// ---------------------------------------------------------------------------------

.logo {
  background: inline-svg("sap-logo.svg") no-repeat;
  background-size: contain;
  position: absolute;
  top: $navbar-padding-vertical - 5px;
  left: $grid-gutter-width / 2;
  height: 30px;
  width: 62px;
}

.navbar-sap {
  // border-bottom: 10px solid $sapgold;
}

// ---------------------------------------------------------------------------------
// Footer
// ---------------------------------------------------------------------------------

footer, .footer {
  @include pie-clearfix;
  background: #e9e9e9;
  margin-top: $footer-margin-top;
  padding: 8px 0;
  position: absolute;
  bottom: 0;
  width: 100%;
  height: $footer-height;
}

.footer-nav {
  list-style-type: none;
  margin: 0;
  padding: 0;

  a {
    color: #555;
  }
}


// ---------------------------------------------------------------------------------
// Breadcrumb
// ---------------------------------------------------------------------------------

.breadcrumb {
  margin-top: 20px;
  margin-bottom: 50px;

  > li {

    > a {
      color: #333;
    }

    &.active > a {
      color: $breadcrumb-active-color;
    }
  }

  & > li + li:before {
    padding: 0 10px 0 14px;
  }

}

.context-breadcrumb {
  @include box-shadow(rgba(0, 0, 0, 0.2) 0 1px 5px);
  @include pie-clearfix;
  background: $context-breadcrumb-bg;
  border-bottom: 1px solid #ddd;
  height: $context-breadcrumb-height;
  position: fixed;
  top: $navbar-height + 1;
  left: 0;
  right: 0;
  z-index: 1029;

  // Setup for megaflyout so that it can be positioned relative to the container rather than the dropdown parent
  .context-container {
    position: relative;

    .dropdown-mega {
      position: static;
    }
  }

  .special-crumb {
    position: absolute;
    right: 0;

    .context-list {
      margin-left: $context-breadcrumb-padding-horizontal;
    }
  }

  .solo-icon-link {
    display: block;
    float: left;
    padding: ($context-breadcrumb-height - $font-size-small*2)/2 0;

    &:hover, &.active {
      .fa-stack-2x {
        @include opacity(0.8);
      }
    }

    .fa-stack {
      font-size: $font-size-small;
    }

    .fa-stack-2x {
      @include opacity(0.3);
      color: #000;
    }

    .fa-inverse {
      color: #fff;
    }

  }

  .context-list {
    @include pie-clearfix;
    float: left;
    list-style-type: none;
    margin-left: -$context-breadcrumb-padding-horizontal;
    margin-right: $context-breadcrumb-padding-horizontal;
    margin-bottom: 0;
    padding: 0;

    > li {
      border-right: 1px solid rgba(51, 51, 51, 0.4);
      display: block;
      font-size: $context-breadcrumb-font-size;
      position: relative;
      float: left;
      padding: 0 0 0 $context-breadcrumb-padding-horizontal;

      &.context-admin {
        background: rgba(255, 255, 255, 0.2);
        border-right: none;

        > .dropdown-menu {
          right: -1px;
          left: auto;
        }
      }

      &.open, &:hover {
        background-color: $dropdown-bg;
        border-color: $dropdown-border;
      }

      .fa {
        margin-right: 5px;

        &.icon-link {
          margin-right: 0;
        }
      }

      > .dropdown-menu {
        @include border-top-radius(0);
        left: -1px;
        border-top: none;
        margin-top: 0;
      }

      > .fancy-nav {
        @extend .dropdown-menu; // extend TWBS dropdown-menu class

        // Megaflyout (full-width, requires context-container wrapper)
        @include container-width-responsive;
        @include column-count(3);

        left: -1px;
        padding: $line-height-computed 0;



        > li {
          padding-left: $grid-gutter-width * 1.5;
        }


        .fancy-nav-header {
          > span {
            font-size: $font-size-base;

            &.fancy-nav-icon {
              @include background-size($font-size-medium);
              font-size: $font-size-medium;
              left: $grid-gutter-width / 2;
              width: $font-size-medium;
              height: $font-size-medium;
            }
          }
        }
      }


      > a {
        color: #333;
        display: inline-block;
        padding: (($context-breadcrumb-height - 1px - ($context-breadcrumb-font-size - $font-size-base) - $line-height-computed) / 2) 0; // to calculate the correct padding subtract from the total height the actual line-height (computed + adjustment for font size (if other than base size)), then divide by 2
        padding-right: $context-breadcrumb-padding-horizontal;

        &:active, &:focus {
          text-decoration: none;
        }
      }
    }
  }

  &.context-breadcrumb-fancy {
    background: $context-breadcrumb-fancy-bg;

    .context-list {
      > li {
        border-right-color: rgba(255, 255, 255, 0.4);

        &.open, &:hover {
          > .glyphicon {
            color: #333;
          }
          > a {
            color: #333;
          }
        }

        > .glyphicon {
          color: #fff;
        }

        > a {
          color: #fff;
        }
      }
    }

  }
}


// ---------------------------------------------------------------------------------
// Main Toolbar
// ---------------------------------------------------------------------------------

.main-toolbar {
  // border-bottom: 1px solid $bright-blue;
  padding: $line-height-computed;

  h1 {
    margin: 0;
    font-size: $font-size-h2;

    .small {
      font-size: 45%;
      a {
        color: #888;
      }
    }

    .page-title {
      font-family: $font-family-sap-book;
      padding-top: $line-height-computed / 3;

      .fa {
        @include opacity(0.8);
      }
    }
  }
}


// ---------------------------------------------------------------------------------
// Alerts
// ---------------------------------------------------------------------------------

.alert-error, .alert-alert {
  @extend .alert-danger;
}

.alert-notice {
  @extend .alert-info;
}

// ---------------------------------------------------------------------------------
// Callouts / Blockouts
// ---------------------------------------------------------------------------------

.bs-callout {
  padding: 20px;
  margin: 0 0 $line-height-computed;
  border: 1px solid #eee;
  border-left-width: 5px;
  border-radius: 3px;

  &.bs-callout-primary {
    border-left-color: $btn-primary-border;
  }

  &.bs-callout-info {
    border-left-color: $btn-info-border;
  }

  &.bs-callout-success {
    border-left-color: $btn-success-border;
  }

  &.bs-callout-warning {
    border-left-color: $btn-warning-border;
  }

  &.bs-callout-danger {
    border-left-color: $btn-danger-border;
  }

}

blockquote, .bs-callout {
  h1, h2, h3, h4, h5, h6 {
    margin-top: 0;
  }
}

// ---------------------------------------------------------------------------------
// Jumbotron
// ---------------------------------------------------------------------------------

.jumbotron-fancy {
  background: $medium-blue;
  background: linear-gradient($deep-blue, $bright-blue);
  color: rgba(255, 255, 255, 0.8);
  font-family: $font-family-sap-light;

  h1, h2, h3, h4, h5, h6 {
    color: #fff;
  }
}

.jumbotron-plain {
  padding: $line-height-computed*1.5 $line-height-computed $line-height-computed $line-height-computed;

  h1 {
    font-size: $font-size-h1;
    margin-top: 0;
    margin-bottom: $line-height-computed;
  }

  p {
    font-size: $font-size-base;
  }
}

// ---------------------------------------------------------------------------------
// Hero Elements
// ---------------------------------------------------------------------------------

.hero-info {
  margin-bottom: $line-height-computed;

  .info-stat {
    font-size: $font-size-h1;
  }

  .info-stat-text {
    @include opacity(0.7);
    font-size: $font-size-small;
    letter-spacing: .15em;
    text-transform: uppercase;
  }
}

.jumbotron .hero-info .info-stat {
  color: #fff;
}

// ---------------------------------------------------------------------------------
// Tables
// ---------------------------------------------------------------------------------

.datatable {
  margin-top: $line-height-computed * 2;
}

td, th {
  &.snug {
    width: 1px;
  }
}

table.table-select tbody tr {
  td {
    a {
      display: block;
    }

    &:hover {
      background-color: $hover-light-blue;
    }

    &.active {
      background-color: $bright-blue;
      color: #fff;

      a {
        color: #fff;
      }
    }
  }
}

tr.deleting, tr.updating {
  td {
    color: #999;
    background-color: #efefef;
  }

  .btn {
    .glyphicon {
      @include spinner(background rgba(0, 0, 0, 0.2));

      &:before {
        content: "";
      }

    }
  }
}

tr.state-active {
  td:first-child {

  }
}

tr.state-paused {
  td:first-child {
    &:before {
      font-family: 'Glyphicons Halflings';
      content: "\e034";
      color: #FFCC33;
    }
  }
}

tr.state-shutoff {
  td:first-child {
    &:before {
      font-family: 'Glyphicons Halflings';
      content: "\e034";
      color: #000000;
    }
  }
}

tr.state-error {
  td:first-child {
    &:before {
      font-family: 'Glyphicons Halflings';
      content: "\e034";
      color: red;
    }
  }
}

tr.task-state {
  background-color: #ffffb5;
  .btn {
    .glyphicon {
      @include spinner(background rgba(0, 0, 0, 0.2));

      &:before {
        content: "";
      }

    }
  }
}

.loading {
  &:before {
    content: " ";
    @include spinner(background rgba(0, 0, 0, 0.2));
    margin-right: 3px;
  }
}

.btn-primary.loading {
  &:before {
    content: " ";
    @include spinner(border-color #efefef, background rgba(0, 0, 0, 0.2));
    margin-right: 0.5em;
  }
}

.modal-body {
  .loading-spinner {
    position: relative;
    left: 50%;
    margin-left: -3em;
    @include spinner(6em);
  }
  .loading-text {
    position: absolute;
    top: 50%;
    margin-top: -0.6em;
    left: 50%;
    margin-left: -2.5em;
  }
}

.data-tabular-display {
  display: table;
}

.data-tabular-row {
  display: table-row;
}

.data-tabular-cell {
  display: table-cell;
  padding-right: 8px;
  word-break: break-word;

  &.label-cell {
    min-width: 100px;
  }
}

// >> Fancy Table <<

.table-fancy {
  table-layout: fixed;
  margin: $line-height-computed*2 0;

  thead {
    tr {
      background: linear-gradient($medium-blue, $bright-blue);
    }

    th {
      color: #fff;
      font-size: $font-size-medium;
    }
  }

  td {
    background: #f9f9f9;
  }

  ul {
    list-style-type: none;
    padding-left: 0;

    li {
      background: inline-svg('rounded-square-outline.svg') 0 1px no-repeat;
      padding-left: 22px;
    }
  }

}

// ---------------------------------------------------------------------------------
// Lists
// ---------------------------------------------------------------------------------

.fancy-list {
  @include pie-clearfix;
  @extend .row;
  padding-left: 0;
  margin-top: $line-height-computed * 3;
  list-style-type: none;

  > li {
    @include make-md-column(4);
    background: none;
    height: $line-height-computed * 5;
    position: relative;
    padding-left: $font-size-large * 1.5 + $grid-gutter-width * 1.25;
    margin-bottom: $line-height-computed;
    overflow: hidden;
    text-overflow: ellipsis;

    .fancy-icon {
      position: absolute;
      top: 0;
      left: $grid-gutter-width / 2;
      color: $bright-blue;
      font-size: $font-size-large * 1.5;
      line-height: 1.2;
    }

    .fancy-header {
      margin-top: 2px;
      margin-bottom: 3px;
      font-weight: bold;
    }

  }

  &.fancy-list-2col {
    > li {
      @include make-md-column(6);
      padding-left: $font-size-large * 1.5 + $grid-gutter-width * 1.25;

    }
  }

  &.fancy-list-2col-indented {
    > li {
      @include make-md-column(5);
      padding-left: $font-size-large * 1.5 + $grid-gutter-width * 1.25;

    }
  }

  &.fancy-list-xl-height {
    > li {
      height: $line-height-computed * 12;
    }
  }
}


// ---------------------------------------------------------------------------------
// Tree
// ---------------------------------------------------------------------------------

.tree-expandable {

  &, ul {
    list-style-type: none;
    padding-left: 0;
  }

  li {
    position: relative;
    padding-left: 19px;

    a, span {
      display: inline-block;
      padding-bottom: 8px;
    }

    .icon-square-outline {
      stroke: #ddd;
    }

    > .node-icon {
      position: absolute;
      left: 0;
      background: inline-svg('rounded-square-outline-grey.svg') 0 3px no-repeat;
      cursor: pointer;
      height: 16px;
      width: 19px;
      padding-left: 19px;

    }


    &.has-children {

      > .node-icon {
        background-image: inline-svg('angle-right-outline.svg');
        background-position: 2px 3px;

      }

      > ul {
        display: none;
      }


      &.node-expanded {
        > .node-icon {
          background-image: inline-svg('angle-down-outline.svg');
          background-position: 0 7px;
        }

        > ul {
          display: block;
        }
      }

    }
  }
}

// ---------------------------------------------------------------------------------
// Forms
// ---------------------------------------------------------------------------------

input[type='checkbox'], input[type='radio'] {
  cursor: pointer;
}

.inline-form {
  display: table;

  .form-group {
    margin: 0;
  }
}

.inline-form-cell, .inline-form-button {
  display: table-cell;
}

.inline-form-button {
  padding-left: 5px;
  width: 1%;
}

.dynamic-form-target {
  display: none;
  &.visible {
    display: block;
  }
}

.form-readonly {
  .form-control[disabled], .form-control[readonly], fieldset[disabled] .form-control {
    @include box-shadow(none);
    background: #fff;
    border: none;
    padding: 0;
    height: auto;
  }
}

// ---------------------------------------------------------------------------------
// Interactive
// ---------------------------------------------------------------------------------

.js-target-hiddenform {
  display: none;
}


// ---------------------------------------------------------------------------------
// News
// ---------------------------------------------------------------------------------

.news {
  .new {
    margin-bottom: $line-height-computed * 3;

    h1, h2, h3, h4, h5, h6 {
      margin-top: $line-height-computed * 1.5;
    }
  }

  .author-title {
    font-weight: bold;
    border-bottom: 2px solid $bright-blue;
    margin: $line-height-computed 0;
  }
}
