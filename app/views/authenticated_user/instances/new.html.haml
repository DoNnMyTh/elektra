= simple_form_for @forms_instance, url: instances_path(domain_fid: @domain_fid, project_fid: @project_fid), method: :post, remote: request.xhr?, html: {data: {modal: true} } do |f|

  %div{class: modal? ? 'modal-body' : ''}
    - unless @forms_instance.errors["message"].blank?
      %p.alert.alert-error= @forms_instance.errors.full_messages.to_sentence
      
    .row
      .col-md-6
        %fieldset
          = f.input :name
          
          = f.input :flavor, { label: "Flavor",
            input_html:         {data: {trigger: 'change', target: '.flavor-details'} },
            as:                 :select,
            collection:         @flavors,
            required:           true}
          
          = f.input :image, { label: "Image",
            input_html:         {data: {trigger: 'change', target: '.image-details'} },
            as:                 :select,
            collection:         @images,
            required:           true}  

      .col-md-6
        %h3 Flavor Details   
        - @flavors.each do |flavor|
          %table.table.flavor-details{id: flavor.id, class: flavor.id==@forms_instance.flavor ? '' : 'hidden'}
            %tbody
              %tr
                %th Flavor
                %td= flavor.name
              %tr
                %th Flavor ID
                %td= flavor.id
              %tr
                %th RAM
                %td= "#{flavor.ram}MB"
              %tr
                %th VCPUs
                %td= "#{flavor.vcpus} VCPU"
              %tr
                %th Disk
                %td= "#{flavor.disk}GB"   
                
        %h3 Image Details   
        - @images.each do |image|
          %table.table.image-details{id: image.id, class: image.id==@forms_instance.image ? '' : 'hidden'}
            %tbody
              %tr
                %th Image
                %td= image.name
              %tr
                %th Size
                %td= image.size
              %tr
                %th Disk format
                %td= image.disk_format
              %tr
                %th Updated at
                %td= image.updated_at
       
  
  %div.buttons{class: modal? ? 'modal-footer' : ''}  
    %button.btn.btn-default{type:"button", data: {dismiss:"modal"}, aria: {label: "Cancel"}} Cancel
    %button{type: "submit", class: 'btn btn-primary', data: { disable_with: 'Please wait...'}} Save
    