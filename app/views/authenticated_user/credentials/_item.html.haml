%tr
  %td= credential.type
  %td
    - unless credential.project_id.blank?
      = services.identity.find_project(credential.project_id)
    - else
      \--
  %td
    .data-tabular-display
      - (credential.blob.is_a?(String) ? JSON.parse(credential.blob) : credential.blob).each do |key, value|
        - key_string = t("credentials.#{credential.type}.#{key}")
        .data-tabular-row
          .data-tabular-cell.text-nobreak
            #{key_string}:
          .data-tabular-cell
            #{value}

    %td.snug
      - if current_user.is_allowed?("identity:delete_credential", {target: { credential: credential } })
        .btn-group
          %button.btn.btn-default.btn-sm{ type: "button", data: { toggle: "dropdown"}, aria: { expanded: true} }
            %span.glyphicon.glyphicon-cog

          %ul.dropdown-menu{ role:"menu"}
            / %li= link_to "Edit", "#"
            / %li.divider
            %li= link_to 'Delete', credential_path(id: credential.id, domain_id: @domain_id), method: :delete, data: { confirm: 'Are you sure?' }