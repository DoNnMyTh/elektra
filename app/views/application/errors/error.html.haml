- @header_title ||= "Application"
- @title ||= "An error has occurred"
- @description ||= "Something went wrong while processing your request.<br> Please try later again."

- if modal?
  = content_for :title do
    %span{class: "#{plugin_name}-icon error-icon"}
    %span.active
      = "#{@header_title} Error"

  .modal-body
    .bs-callout.bs-callout-danger
      %h3= @title.html_safe
      %p= h(@description)
      - if @error_id
        .callout-footer
          %b Error ID:
          %span
            = @error_id

    - if @details
      %p
        = link_to "#", data: {toggle: "show-error-details"} do
          Show error details
          %i.fa.fa-caret-down

      .scrollable-text.error-details-area.hide
        = simple_format(@details)

  .modal-footer
    %button.btn.btn-default{type:"button", data: {dismiss:"modal"}, aria: {label: "Close"}} Close

- else
  .bs-callout.bs-callout-danger
    %h3= @title.html_safe
    %p= h(@description)
    - if @error_id
      .callout-footer
        %b Error ID:
        %span
          = @error_id

  - if @details
    %p
      = link_to "#", data: {toggle: "show-error-details"} do
        Show error details
        %i.fa.fa-caret-down

    .scrollable-text.error-details-area.hide
      = simple_format(@details)
-if @sentry_event_id && @sentry_public_dsn 
  = content_for :javascripts do
    %script{src: "https://cdn.ravenjs.com/3.1.0/raven.min.js"}
    :javascript 
      Raven.config('#{@sentry_public_dsn}').install();
      Raven.setUserContext(#{@sentry_user ? @sentry_user.to_json : ""});
      Raven.showReportDialog({
        // grab the eventId generated by the Sentry SDK
        eventId: '#{@sentry_event_id}',
      });
